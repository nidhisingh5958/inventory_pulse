# Environment Configuration

## Environment Variables Reference

### Required Variables

| Variable | Description | Example | Where to Get |
|----------|-------------|---------|--------------|
| `COMPOSIO_API_KEY` | Composio platform API key | `ak_XTsOpsqNRCXy4ZuKTDmK` | [Composio Dashboard](https://app.composio.dev) |
| `COMPOSIO_USER_ID` | Unique user identifier | `pg-test-acf004e1-4d69-4dc4-9762-f63c078e3619` | Generated by Composio |
| `COMPOSIO_GMAIL_ACCOUNT_ID` | Gmail auth config ID | `ac_Vvb6yp4xUiIt` | Composio Auth Configs |
| `GEMINI_API_KEY` | Google Gemini AI API key | `AIzaSyB6ob4O9oTmcNrnGqqeBYUxVMpy4bGa_Rk` | [Google AI Studio](https://aistudio.google.com) |

### Optional Variables

| Variable | Description | Default | Purpose |
|----------|-------------|---------|---------|
| `SPREADSHEET_ID` | Google Sheets ID | None | Default inventory sheet |
| `NOTION_DATABASE_ID` | Notion database ID | None | Default reorder database |

## .env File Template

Create `.env` in project root:

```env
# =============================================================================
# COMPOSIO CONFIGURATION
# =============================================================================
COMPOSIO_API_KEY=your_composio_api_key_here
COMPOSIO_USER_ID=your_unique_user_id_here
COMPOSIO_GMAIL_ACCOUNT_ID=your_gmail_auth_config_id_here

# =============================================================================
# AI SERVICES
# =============================================================================
GEMINI_API_KEY=your_gemini_api_key_here

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
SPREADSHEET_ID=your_google_sheets_id_here
NOTION_DATABASE_ID=your_notion_database_id_here

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
DEBUG=true
LOG_LEVEL=INFO
```

## Getting API Keys

### 1. Composio Setup

1. **Sign up**: Go to [app.composio.dev](https://app.composio.dev)
2. **Get API Key**: Dashboard â†’ Settings â†’ API Keys
3. **Create User ID**: Use format `your-app-name-{random-uuid}`
4. **Gmail Auth Config**: 
   - Go to Auth Configs
   - Create new OAuth2 config for Gmail
   - Copy the config ID

### 2. Google Gemini AI

1. **Visit**: [aistudio.google.com](https://aistudio.google.com)
2. **Create Project**: Set up new project
3. **Generate API Key**: API Keys section
4. **Copy Key**: Add to `.env` file

### 3. Groq (Optional)

1. **Sign up**: [console.groq.com](https://console.groq.com)
2. **Create API Key**: API Keys section
3. **Copy Key**: Add to `.env` file

## ðŸ” Environment Validation

### Validation Script

Create `validate_env.py`:

```python
import os
from dotenv import load_dotenv

def validate_environment():
    load_dotenv()
    
    required = {
        'COMPOSIO_API_KEY': 'Composio API access',
        'COMPOSIO_USER_ID': 'Composio user identification', 
        'COMPOSIO_GMAIL_ACCOUNT_ID': 'Gmail integration',
        'GEMINI_API_KEY': 'AI email generation'
    }
    
    optional = {
        'SPREADSHEET_ID': 'Default Google Sheets',
        'NOTION_DATABASE_ID': 'Default Notion database'
    }
    
    print("ðŸ” Environment Validation")
    print("=" * 50)
    
    # Check required variables
    print("\nðŸ“‹ Required Variables:")
    all_required_set = True
    for var, desc in required.items():
        value = os.getenv(var)
        status = "âœ… Set" if value else "âŒ Missing"
        print(f"  {var}: {status} - {desc}")
        if not value:
            all_required_set = False
    
    # Check optional variables
    print("\nðŸ”§ Optional Variables:")
    for var, desc in optional.items():
        value = os.getenv(var)
        status = "âœ… Set" if value else "âšª Not set"
        print(f"  {var}: {status} - {desc}")
    
    print("\n" + "=" * 50)
    if all_required_set:
        print("âœ… All required environment variables are set!")
        return True
    else:
        print("âŒ Some required environment variables are missing!")
        return False

if __name__ == "__main__":
    validate_environment()
```

Run validation:
```bash
python validate_env.py
```

## Security Best Practices

### 1. Environment File Security

```bash
# Add .env to .gitignore
echo ".env" >> .gitignore

# Set proper file permissions (Linux/Mac)
chmod 600 .env
```

### 2. Key Rotation

- Rotate API keys regularly
- Use different keys for development/production
- Monitor key usage in respective dashboards

### 3. Local Development

```env
# Use separate keys for development
COMPOSIO_API_KEY=dev_key_here
GEMINI_API_KEY=dev_key_here
```

## Environment Loading

The application loads environment variables in this order:

1. **System environment variables**
2. **`.env` file in project root**
3. **Default values in code**

### Loading in Code

```python
from dotenv import load_dotenv
import os

# Load environment variables
load_dotenv()

# Access variables
api_key = os.getenv("COMPOSIO_API_KEY")
user_id = os.getenv("COMPOSIO_USER_ID", "default-user")
```

## Navigation
- [Docs Home](../README.md)
- [Installation](installation.md)
- [Authentication Setup](authentication.md)
- [Architecture Overview](../architecture/system-overview.md)
- [Testing Guide](../api/testing.md)